# **************************************************************************** #
#                                                                              #
#                                                         :::      ::::::::    #
#    Makefile                                           :+:      :+:    :+:    #
#                                                     +:+ +:+         +:+      #
#    By: bhildebr <bhildebr@student.42.fr>          +#+  +:+       +#+         #
#                                                 +#+#+#+#+#+   +#+            #
#    Created: 2024/02/15 22:04:52 by bhildebr          #+#    #+#              #
#    Updated: 2024/02/15 22:04:52 by bhildebr         ###   ########.fr        #
#                                                                              #
# **************************************************************************** #

NAME = libtrillian.a

CC = gcc
CFLAGS = -Wall -Wextra -Werror -std=c99

SOURCES = \
	./source/base/processes/allocate/allocate.c \
	./source/base/processes/deallocate/deallocate.c \
	./source/base/processes/delete/delete.c \
	./source/base/processes/new/new.c \
	./source/base/types/any/any_create.c \
	./source/base/types/any/any_destroy.c \
	./source/base/types/trillian/trillian_create.c \
	./source/base/types/trillian/trillian_delete.c \
	./source/base/types/trillian/trillian_destroy.c \
	./source/base/types/trillian/trillian_get.c \
	./source/base/types/trillian/trillian_get_height.c \
	./source/base/types/trillian/trillian_insert.c \
	./source/base/types/trillian/trillian_print.c \
	./source/base/types/trillian/trillian_rebalance.c \
	./source/base/types/trillian/trillian_search.c \
	./source/base/types/trillian/trillian_update_height.c \
	./source/processes/assert/assert.c \
	./source/processes/debug/debug.c \
	./source/processes/error/error.c \
	./source/processes/print/print.c \
	./source/types/character/character_create.c \
	./source/types/character/character_destroy.c \
	./source/types/character/character_get.c \
	./source/types/file/file_create.c \
	./source/types/file/file_destroy.c \
	./source/types/fractional/fractional_create.c \
	./source/types/fractional/fractional_destroy.c \
	./source/types/integer/integer_create.c \
	./source/types/integer/integer_destroy.c \
	./source/types/integer/integer_get.c \
	./source/types/string/string_create.c \
	./source/types/string/string_destroy.c \
	./source/types/string/string_get.c \
	./source/types/string/string_is_int.c \
	./source/types/string/string_to_integer.c \
	./source/types/vector/vector_create.c \
	./source/types/vector/vector_destroy.c \
	./source/types/vector/vector_expand.c \
	./source/types/vector/vector_get.c \
	./source/types/vector/vector_get_length.c \
	./source/types/vector/vector_pop.c \
	./source/types/vector/vector_push.c \
	./source/types/vector/vector_reverse.c \
	./source/types/vector/vector_set.c \
	./source/types/vector/vector_shift.c \
	./source/types/vector/vector_unshift.c

HEADERS = \
	allocate.h \
	deallocate.h \
	delete.h \
	new.h \
	any.h \
	trillian.h \
	assert.h \
	debug.h \
	error.h \
	print.h \
	character.h \
	file.h \
	fractional.h \
	integer.h \
	string.h \
	vector.h

OBJECTS = \
	allocate.o \
	deallocate.o \
	delete.o \
	new.o \
	any_create.o \
	any_destroy.o \
	trillian_create.o \
	trillian_delete.o \
	trillian_destroy.o \
	trillian_get.o \
	trillian_get_height.o \
	trillian_insert.o \
	trillian_print.o \
	trillian_rebalance.o \
	trillian_search.o \
	trillian_update_height.o \
	assert.o \
	debug.o \
	error.o \
	print.o \
	character_create.o \
	character_destroy.o \
	character_get.o \
	file_create.o \
	file_destroy.o \
	fractional_create.o \
	fractional_destroy.o \
	integer_create.o \
	integer_destroy.o \
	integer_get.o \
	string_create.o \
	string_destroy.o \
	string_get.o \
	string_is_int.o \
	string_to_integer.o \
	vector_create.o \
	vector_destroy.o \
	vector_expand.o \
	vector_get.o \
	vector_get_length.o \
	vector_pop.o \
	vector_push.o \
	vector_reverse.o \
	vector_set.o \
	vector_shift.o \
	vector_unshift.o

DEPENDENCIES = \
	allocate.d \
	deallocate.d \
	delete.d \
	new.d \
	any_create.d \
	any_destroy.d \
	trillian_create.d \
	trillian_delete.d \
	trillian_destroy.d \
	trillian_get.d \
	trillian_get_height.d \
	trillian_insert.d \
	trillian_print.d \
	trillian_rebalance.d \
	trillian_search.d \
	trillian_update_height.d \
	assert.d \
	debug.d \
	error.d \
	print.d \
	character_create.d \
	character_destroy.d \
	character_get.d \
	file_create.d \
	file_destroy.d \
	fractional_create.d \
	fractional_destroy.d \
	integer_create.d \
	integer_destroy.d \
	integer_get.d \
	string_create.d \
	string_destroy.d \
	string_get.d \
	string_is_int.d \
	string_to_integer.d \
	vector_create.d \
	vector_destroy.d \
	vector_expand.d \
	vector_get.d \
	vector_get_length.d \
	vector_pop.d \
	vector_push.d \
	vector_reverse.d \
	vector_set.d \
	vector_shift.d \
	vector_unshift.d

BUILD_DIR = build
DEBUG_DIR = build/debug
RELEASES_DIR = build/releases
LATEST_DIR = build/releases/latest

-include $(DEPENDENCIES)

all: build

build: $(OBJECTS)
	@mkdir -p $(RELEASES_DIR)/latest
	@ar rcs $(RELEASES_DIR)/latest/bin/latest $(OBJECTS)

debug: CFLAGS += -DDEBUG -g
debug: $(OBJECTS)
	@ar rcs $(DEBUG_DIR)/bin/$(NAME) $(OBJECTS)

release: CFLAGS += -03
release: $(OBJECTS)
	@mkdir -p $(RELEASES_DIR)/$(RELEASE_NAME)
	@ar rcs $(RELEASES_DIR)/$(RELEASE_NAME)/bin/$(RELEASE_NAME)-v${RELEASE_VERSION} $(OBJECTS)

$(NAME): build

clean:
	@$(RM) $(OBJECTS)

fclean: clean
	@$(RM) $(NAME)

re: fclean all

.PHONY: all build debug release $(NAME) clean fclean re

# Rules to compile the source code into object files
